<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>docker trial - 夏日竹下</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="preparation ★ubuntu i386版本無法裝docker，一定要amd64版本才能裝docker。 
sudo -sapt-get install htop iftop iotop unzip p7zip p7zip-full rar unrar openssh-server openssh-clientservice sshd statusreboot
 ★under ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="docker trial">
<meta property="og:url" content="http://zhengda.github.io/2016/08/17/docker-trial/index.html">
<meta property="og:site_name" content="夏日竹下">
<meta property="og:description" content="preparation ★ubuntu i386版本無法裝docker，一定要amd64版本才能裝docker。 
sudo -sapt-get install htop iftop iotop unzip p7zip p7zip-full rar unrar openssh-server openssh-clientservice sshd statusreboot
 ★under ubuntu">
<meta property="og:updated_time" content="2017-07-09T07:58:36.838Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker trial">
<meta name="twitter:description" content="preparation ★ubuntu i386版本無法裝docker，一定要amd64版本才能裝docker。 
sudo -sapt-get install htop iftop iotop unzip p7zip p7zip-full rar unrar openssh-server openssh-clientservice sshd statusreboot
 ★under ubuntu">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-663898-12', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zhengda.github.io"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-docker-trial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      docker trial
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/08/17/docker-trial/" class="article-date">
  <time datetime="2016-08-16T18:06:17.000Z" itemprop="datePublished">2016-08-17</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="preparation">preparation</h4><p><strong> ★ubuntu i386版本無法裝docker，一定要amd64版本才能裝docker。 </strong></p>
<p>sudo -s<br>apt-get install htop iftop iotop unzip p7zip p7zip-full rar unrar openssh-server openssh-client<br>service sshd status<br>reboot</p>
<p><strong> ★under ubuntu16.04 amd64</strong><br>sudo -s<br>uname -a<br>cat /etc/lsb-release<br>apt-get update<br>apt-get upgrade</p>
<h4 id="install_docker">install docker</h4><p>curl -sSL <a href="https://get.docker.com/" target="_blank" rel="external">https://get.docker.com/</a> | sudo sh<br>service docker status<br>docker version<br>docker info</p>
<h4 id="test_docker_works">test docker works</h4><p>docker run hello-world</p>
<h4 id="search_and_pull">search and pull</h4><p>docker search ubuntu<br>docker pull ubuntu<br>docker pull java<br>docker pull tomcat<br>docker pull mysql<br>docker pull jplock/zookeeper:3.4.6<br>docker pull ches/kafka<br>docker pull sequenceiq/spark:1.6.0<br>docker pull dylanmei/zeppelin</p>
<h4 id="basic">basic</h4><p>docker pull ubuntu<br>docker create ubuntu:16.04<br>docker run -i -t ubuntu:16.04 /bin/bash<br>df -h<br>docker run -i -t -d ubuntu:16.04 /bash/sh -c “while true;do echo hello world;sleep 1; done”    # -d run in background<br>docker ps    #show containers<br>docker logs {container_id}<br>docker exec -i -t {container_id} /bin/bash<br>docker stop {container_id}<br>docker start {container_id}<br>docker rm {container_id}<br>docker rm {container_id} -f</p>
<h4 id="pull,_create,_show,_remove_image">pull, create, show, remove image</h4><p>docker pull ubuntu<br>docker create ubuntu:16.04<br>docker images    #show all images<br>docker rmi {image_name}    #delete specific image</p>
<h4 id="references">references</h4><p><a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/" target="_blank" rel="external">https://docs.docker.com/engine/installation/linux/ubuntulinux/</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04" target="_blank" rel="external">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04</a><br><a href="https://www.howtoforge.com/tutorial/docker-installation-and-usage-on-ubuntu-16.04/" target="_blank" rel="external">https://www.howtoforge.com/tutorial/docker-installation-and-usage-on-ubuntu-16.04/</a><br><a href="https://philipzheng.gitbooks.io/docker_practice/content/install/ubuntu.html" target="_blank" rel="external">https://philipzheng.gitbooks.io/docker_practice/content/install/ubuntu.html</a> #quiet old 2014</p>
<h4 id="常用_official_images">常用 official images</h4><p>rabbitmq<br>memcached<br>radis<br>cassandra<br>nginx<br>httpd<br>haproxy<br>jenkins<br>kibana<br>elasticsearch<br>logstash<br>postgres<br>mariadb<br>java<br>tomcat<br>mysql<br>ubuntu<br>debian<br>centos<br>solr<br>maven<br>jetty</p>
<h4 id="cAdvisor">cAdvisor</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  --volume=/:/rootfs:ro \</span><br><span class="line">  --volume=/var/run:/var/run:rw \</span><br><span class="line">  --volume=/sys:/sys:ro \</span><br><span class="line">  --volume=/var/lib/docker/:/var/lib/docker:ro \</span><br><span class="line">  --publish=<span class="number">8080</span>:<span class="number">8080</span> \</span><br><span class="line">  --detach=<span class="literal">true</span> \</span><br><span class="line">  --name=cadvisor \</span><br><span class="line">  google/cadvisor:latest</span><br></pre></td></tr></table></figure>
<p><a href="http://{container_ip}:8080" target="_blank" rel="external">http://{container_ip}:8080</a></p>
<h3 id="install_docker-machine">install docker-machine</h3><p>@see <a href="https://github.com/docker/machine/releases" target="_blank" rel="external">https://github.com/docker/machine/releases</a><br>@see <a href="https://docs.docker.com/machine/install-machine/" target="_blank" rel="external">https://docs.docker.com/machine/install-machine/</a>  <a href="https://docs.docker.com/machine/get-started/" target="_blank" rel="external">https://docs.docker.com/machine/get-started/</a><br>@see <a href="https://www.digitalocean.com/community/tutorials/how-to-provision-and-manage-remote-docker-hosts-with-docker-machine-on-ubuntu-16-04" target="_blank" rel="external">https://www.digitalocean.com/community/tutorials/how-to-provision-and-manage-remote-docker-hosts-with-docker-machine-on-ubuntu-16-04</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:~<span class="comment"># date</span></span><br><span class="line">Fri Aug <span class="number">26</span> <span class="number">02</span>:<span class="number">53</span>:<span class="number">41</span> PDT <span class="number">2016</span></span><br><span class="line">root@ubuntu:~<span class="comment"># curl -L https://github.com/docker/machine/releases/download/v0.8.1/docker-machine-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-machine &amp;&amp; chmod +x /usr/local/bin/docker-machine</span></span><br><span class="line">root@ubuntu:~<span class="comment"># docker-machine --version</span></span><br><span class="line">docker-machine version <span class="number">0.8</span>.<span class="number">1</span>, build <span class="number">41</span>b3b25</span><br><span class="line">root@ubuntu:~<span class="comment"># docker-compose --version</span></span><br><span class="line">docker-compose version <span class="number">1.5</span>.<span class="number">2</span>, build unknown</span><br><span class="line">root@ubuntu:~<span class="comment"># docker --version</span></span><br><span class="line">Docker version <span class="number">1.12</span>.<span class="number">1</span>, build <span class="number">23</span>cf638</span><br></pre></td></tr></table></figure></p>
<h3 id="cheatscript">cheatscript</h3><h4 id="redis">redis</h4><p>docker run —name gitlab-redis -d \<br>    —volume /srv/docker/gitlab/redis:/var/lib/redis \<br>    sameersbn/redis:latest</p>
<h4 id="postgresql_9-6">postgresql 9.6</h4><p>docker run —name gitlab-postgresql -d \<br>    —env ‘DB_NAME=gitlabhq_production’ \<br>    —env ‘DB_USER=gitlab’ —env ‘DB_PASS=password’ \<br>    —env ‘DB_EXTENSION=pg_trgm’ \<br>    —volume /srv/docker/gitlab/postgresql:/var/lib/postgresql \<br>    sameersbn/postgresql:9.6</p>
<h4 id="msql">msql</h4><p>docker run —name mysql -d \<br>    -p 33306:3306 \<br>    -e MYSQL_ROOT_PASSWORD=password \<br>    -v /srv/docker/mysql/conf:/etc/mysql/conf.d \<br>    -v /srv/docker/mysql/data:/var/lib/mysql \<br>    mysql:5.7</p>
<p>docker run —name mysql -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password mysql:5.7.10<br>docker exec mysql cat /etc/mysql/my.cnf</p>
<h4 id="spark_1-6">spark 1.6</h4><p>docker run -i -t -h sandbox sequenceiq/spark:1.6.0 bash</p>
<h4 id="zookeeper">zookeeper</h4><h4 id="kafka">kafka</h4>
      
    </div>
  
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/08/18/pppoe-on-ubuntu/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          pppoe on ubuntu
        
      </div>
    </a>
  
  
    <a href="/2016/08/14/ubuntu-change-locale/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ubuntu change locale&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 zhengda
    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>